# scheduler's port
set -x

export LD_LIBRARY_PATH=$CUDA_HOME/lib64:$UCX_HOME/lib:$LD_LIBRARY_PATH

export DMLC_NODE_HOST=${DMLC_NODE_HOST:-"xxx"}
export DMLC_PS_ROOT_URI=$DMLC_NODE_HOST
export DMLC_PS_ROOT_PORT=${DMLC_PS_ROOT_PORT:-12345}

export BYTEPS_ENABLE_IPC=0
export DMLC_NUM_WORKER=${DMLC_NUM_WORKER:-2}
export DMLC_NUM_SERVER=${DMLC_NUM_SERVER:-2}
# export PS_VERBOSE=3
export DMLC_INTERFACE=eth2
export NUM_KEY_PER_SERVER=10

export DMLC_NUM_PORTS=${DMLC_NUM_PORTS:-2}
export DMLC_ENABLE_RDMA=${DMLC_ENABLE_RDMA:-"multivan"}
export ENABLE_RECV_BUFFER=0

ROLE=$1
DMLC_ROLE=$1 ./test_benchmark 40960000 25 1
